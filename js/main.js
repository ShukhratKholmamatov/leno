// --- Language Dictionary ---
const langData = {
    uz: {
        "nav-core": "Asosiy", "nav-projects": "Loyihalar", "nav-tarifs": "Tariflar", "nav-sync": "Bog'lanish",
        "hero-slogan": "AGENTLIKDAN KO'PROQ", "hero-sub": "Intellekt ‚Ä¢ Nafosat ‚Ä¢ Evolyutsiya", "hero-btn": "Protokolni Boshlash",
        "stat-projects": "Yakunlangan Loyihalar", "stat-clients": "Mamnun Mijozlar", "stat-years": "Yillik Tajriba",
        "registry-title": "Mukammallik Reyestri", "catalog-title": "Loyihalar Katalogi",
        "vault-web": "Veb-saytlar", "vault-smm": "SMM / Instagram", "vault-media": "Media / Multfilmlar",
        "web-tag-1": "E-Kommertsiya / Veb-sayt", "web-title-1": "Kofe Distributsiyasi", "web-desc-1": "Premium kofe brendi uchun veb-sayt",
        "web-tag-2": "Next.js / AI Integratsiya", "web-title-2": "Texnologik Hamjamiyat", "web-desc-2": "Axborot texnologiyalari vazirligi uchun sayt",
        "web-tag-3": "Veb-sayt / Brending", "web-title-3": "Yuk mashinalari savdosi", "web-desc-3": "Xalqaro diler uchun veb-sayt",
        "view-project": "Loyihani Ko'rish ‚Üí",
        "smm-story-1": "<li>‚Ä¢ 0 tizimlashtirilgan muvaffaqiyatli kiyim brendi</li><li>‚Ä¢ Professional brending yondashuvi</li><li>‚Ä¢ 70+ uniforma ‚Äî kompaniyalar va ta'lim muassasalari bilan hamkorlik</li>",
        "smm-story-2": "<li>‚Ä¢ Brend tanilishi va PR strategiyasi</li><li>‚Ä¢ Professional media va dizayn xizmatlari</li><li>‚Ä¢ O'zbekiston bo'ylab distribyutor hamkorlar</li>",
        "smm-story-3": "<li>‚Ä¢ Brend identifikatsiyasi va Piar tizimi</li><li>‚Ä¢ SMM va marketing bo'yicha strukturaviy yondashuv</li><li>‚Ä¢ Mijozlar bazasi va CRM tizimi</li>",
        "smm-story-4": "<li>‚Ä¢ Barqaror va kuchli lead generatsiya tizimi</li><li>‚Ä¢ Oyiga 10+ xizmatdan foydalanuvchi faol mijozlar</li><li>‚Ä¢ Yuqori samarali marketing tizimi</li>",
        "smm-story-5": "<li>‚Ä¢ Professional foto/media yondashuv</li><li>‚Ä¢ Strategik yuritilgan ijtimoiy tarmoqlar tizimi</li><li>‚Ä¢ Piar tizimi</li>",
        "badge-prestige": "UNIFORM BREND", "badge-success": "70+ UNIFORMA",
        "tag-furniture": "Mebel Kompaniyasi", "tag-branding": "CRM Tizimi",
        "tag-education": "Ta'lim", "tag-students": "10+ Oylik Mijoz",
        "tag-school": "Maktab", "tag-media": "Media + PR",
        "media-type-1": "Dorixonalar tarmog'i", "media-type-2": "Multfilm", "media-type-3": "Kosmetika", "media-type-4": "Jamoat transporti", "media-type-5": "Kosmetika",
        "pricing-mod": "Investitsiya Modullari", "pricing-title": "Xizmat Tariflari",
        "t1-name": "Ekonom", "t1-list": "<li>2 ta kreativ</li><li>1 ta shooting day</li><li>4 ta Reels / 8 ta Post</li><li>15 ta stories</li>",
        "t2-name": "Online", "t2-list": "<li>Onlayn boshqaruv</li><li>2 ta kreativ</li><li>6-8 ta Reels / 10 ta Post</li><li>20 ta stories</li>",
        "t3-name": "Standart", "t3-list": "<li>8 ta Reels / 12 ta Post</li><li>20+ stories</li><li>2 ta shooting day</li><li>4 ta kreativ</li>",
        "t4-name": "Premium", "t4-list": "<li>12 ta Reels / 15 ta Post</li><li>4 ta shooting day</li><li>6 ta kreativ</li><li>To'liq Analitika</li>",
        "t5-name": "VIP", "t5-list": "<li>Veb-sayt</li><li>Logotip brending</li><li>Cheksiz Reels</li><li>Cheksiz Postlar</li>",
        "optimal": "Eng yaxshi", "btn-init": "Tanlash",
        "form-title": "Bog'lanish", "form-sub": "Ma'lumotlaringizni qoldiring, biz tez orada aloqaga chiqamiz.",
        "label-name": "Ismingiz", "label-email": "Email", "label-type": "Tarifni tanlang", "label-msg": "Xabaringiz",
        "ph-name": "To'liq Ismingiz", "ph-email": "Email manzilingiz", "opt-1": "Tarifni tanlang", "ph-msg": "Loyiha haqida yozing...", "form-btn": "Yuborish",
        "label-services": "Xizmat turi", "svc-consult": "Konsultatsiya olish", "svc-branding": "Branding", "svc-smm": "SMM", "svc-logo": "Logo", "svc-website": "Veb-sayt",
        "gallery-sub": "Bizning Ishlarimiz", "gallery-title": "Galereya",
        "gallery-more": "Ko'proq ko'rish", "gallery-less": "Yopish"
    },
    ru: {
        "nav-core": "–ì–õ–ê–í–ù–ê–Ø", "nav-projects": "–ü–†–û–ï–ö–¢–´", "nav-tarifs": "–¢–ê–†–ò–§–´", "nav-sync": "–°–í–Ø–ó–ê–¢–¨–°–Ø",
        "hero-slogan": "–ë–û–õ–¨–®–ï –ß–ï–ú –ê–ì–ï–ù–¢–°–¢–í–û", "hero-sub": "–ò–ù–¢–ï–õ–õ–ï–ö–¢ ‚Ä¢ –≠–õ–ï–ì–ê–ù–¢–ù–û–°–¢–¨ ‚Ä¢ –≠–í–û–õ–Æ–¶–ò–Ø", "hero-btn": "–ó–ê–ü–£–°–¢–ò–¢–¨ –ü–†–û–¢–û–ö–û–õ",
        "stat-projects": "–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ü—Ä–æ–µ–∫—Ç–æ–≤", "stat-clients": "–î–æ–≤–æ–ª—å–Ω—ã—Ö –ö–ª–∏–µ–Ω—Ç–æ–≤", "stat-years": "–õ–µ—Ç –û–ø—ã—Ç–∞",
        "registry-title": "–†–ï–ï–°–¢–† –°–û–í–ï–†–®–ï–ù–°–¢–í–ê", "catalog-title": "–ö–ê–¢–ê–õ–û–ì –ü–†–û–ï–ö–¢–û–í",
        "vault-web": "–í–µ–±-—Å–∞–π—Ç—ã", "vault-smm": "SMM / –ò–Ω—Å—Ç–∞–≥—Ä–∞–º", "vault-media": "–ú–µ–¥–∏–∞ / –ú—É–ª—å—Ç—Ñ–∏–ª—å–º—ã",
        "web-tag-1": "E-Commerce / –í–µ–±-—Å–∞–π—Ç", "web-title-1": "–î–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è –ö–æ—Ñ–µ", "web-desc-1": "–°–∞–π—Ç –¥–ª—è –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–≥–æ –±—Ä–µ–Ω–¥–∞ –∫–æ—Ñ–µ",
        "web-tag-2": "Next.js / AI –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è", "web-title-2": "–¢–µ—Ö-—Å–æ–æ–±—â–µ—Å—Ç–≤–æ", "web-desc-2": "–°–∞–π—Ç –¥–ª—è –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ –ò–¢",
        "web-tag-3": "–í–µ–±-—Å–∞–π—Ç / –ë—Ä–µ–Ω–¥–∏–Ω–≥", "web-title-3": "–ü—Ä–æ–¥–∞–∂–∞ –≥—Ä—É–∑–æ–≤–∏–∫–æ–≤", "web-desc-3": "–°–∞–π—Ç –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –¥–∏–ª–µ—Ä–∞",
        "view-project": "–°–º–æ—Ç—Ä–µ—Ç—å –ü—Ä–æ–µ–∫—Ç ‚Üí",
        "smm-story-1": "<li>‚Ä¢ –°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—Å–ø–µ—à–Ω—ã–π –±—Ä–µ–Ω–¥ –æ–¥–µ–∂–¥—ã</li><li>‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –±—Ä–µ–Ω–¥–∏–Ω–≥—É</li><li>‚Ä¢ 70+ —É–Ω–∏—Ñ–æ—Ä–º ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —Å –∫–æ–º–ø–∞–Ω–∏—è–º–∏ –∏ —É—á–µ–±–Ω—ã–º–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏</li>",
        "smm-story-2": "<li>‚Ä¢ –£–∑–Ω–∞–≤–∞–µ–º–æ—Å—Ç—å –±—Ä–µ–Ω–¥–∞ –∏ PR —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</li><li>‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ–¥–∏–∞ –∏ –¥–∏–∑–∞–π–Ω —É—Å–ª—É–≥–∏</li><li>‚Ä¢ –ü–∞—Ä—Ç–Ω—ë—Ä—ã-–¥–∏—Å—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã –ø–æ –≤—Å–µ–º—É –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω—É</li>",
        "smm-story-3": "<li>‚Ä¢ –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±—Ä–µ–Ω–¥–∞ –∏ PR —Å–∏—Å—Ç–µ–º–∞</li><li>‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ SMM –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É</li><li>‚Ä¢ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∞–∑–∞ –∏ CRM —Å–∏—Å—Ç–µ–º–∞</li>",
        "smm-story-4": "<li>‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∏ –º–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</li><li>‚Ä¢ 10+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –µ–∂–µ–º–µ—Å—è—á–Ω–æ</li><li>‚Ä¢ –í—ã—Å–æ–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞</li>",
        "smm-story-5": "<li>‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ—Ç–æ/–º–µ–¥–∏–∞ –ø–æ–¥—Ö–æ–¥</li><li>‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</li><li>‚Ä¢ PR —Å–∏—Å—Ç–µ–º–∞</li>",
        "badge-prestige": "–ë–†–ï–ù–î –£–ù–ò–§–û–†–ú–´", "badge-success": "70+ –£–ù–ò–§–û–†–ú",
        "tag-furniture": "–ú–µ–±–µ–ª—å–Ω–∞—è –ö–æ–º–ø–∞–Ω–∏—è", "tag-branding": "CRM –°–∏—Å—Ç–µ–º–∞",
        "tag-education": "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ", "tag-students": "10+ –ö–ª–∏–µ–Ω—Ç–æ–≤/–º–µ—Å",
        "tag-school": "–®–∫–æ–ª–∞", "tag-media": "–ú–µ–¥–∏–∞ + PR",
        "media-type-1": "–ê–ø—Ç–µ—á–Ω–∞—è —Å–µ—Ç—å", "media-type-2": "–ú—É–ª—å—Ç—Ñ–∏–ª—å–º", "media-type-3": "–ö–æ—Å–º–µ—Ç–∏–∫–∞", "media-type-4": "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "media-type-5": "–ö–æ—Å–º–µ—Ç–∏–∫–∞",
        "pricing-mod": "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ú–æ–¥—É–ª–∏", "pricing-title": "–¢–∞—Ä–∏—Ñ—ã –£—Å–ª—É–≥",
        "t1-name": "–≠–∫–æ–Ω–æ–º", "t1-list": "<li>2 –∫—Ä–µ–∞—Ç–∏–≤–∞</li><li>1 —Å—ä–µ–º–æ—á–Ω—ã–π –¥–µ–Ω—å</li><li>4 Reels / 8 –ü–æ—Å—Ç–æ–≤</li><li>15 —Å—Ç–æ—Ä–∏—Å</li>",
        "t2-name": "–û–Ω–ª–∞–π–Ω", "t2-list": "<li>–û–Ω–ª–∞–π–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</li><li>2 –∫—Ä–µ–∞—Ç–∏–≤–∞</li><li>6-8 Reels / 10 –ü–æ—Å—Ç–æ–≤</li><li>20 —Å—Ç–æ—Ä–∏—Å</li>",
        "t3-name": "–°—Ç–∞–Ω–¥–∞—Ä—Ç", "t3-list": "<li>8 Reels / 12 –ü–æ—Å—Ç–æ–≤</li><li>20+ —Å—Ç–æ—Ä–∏—Å</li><li>2 —Å—ä–µ–º–æ—á–Ω—ã—Ö –¥–Ω—è</li><li>4 –∫—Ä–µ–∞—Ç–∏–≤–∞</li>",
        "t4-name": "–ü—Ä–µ–º–∏—É–º", "t4-list": "<li>12 Reels / 15 –ü–æ—Å—Ç–æ–≤</li><li>4 —Å—ä–µ–º–æ—á–Ω—ã—Ö –¥–Ω—è</li><li>6 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤</li><li>–ü–æ–ª–Ω–∞—è –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</li>",
        "t5-name": "VIP", "t5-list": "<li>–í–µ–±-—Å–∞–π—Ç</li><li>–õ–æ–≥–æ –±—Ä–µ–Ω–¥–∏–Ω–≥</li><li>–ë–µ–∑–ª–∏–º–∏—Ç Reels</li><li>–ë–µ–∑–ª–∏–º–∏—Ç –ü–æ—Å—Ç–æ–≤</li>",
        "optimal": "–õ—É—á—à–∏–π –≤—ã–±–æ—Ä", "btn-init": "–í—ã–±—Ä–∞—Ç—å",
        "form-title": "–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏", "form-sub": "–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
        "label-name": "–í–∞—à–µ –∏–º—è", "label-email": "Email", "label-type": "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ", "label-msg": "–°–æ–æ–±—â–µ–Ω–∏–µ",
        "ph-name": "–í–∞—à–µ –ò–º—è", "ph-email": "–í–∞—à Email", "opt-1": "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ", "ph-msg": "–ù–∞–ø–∏—à–∏—Ç–µ –æ –ø—Ä–æ–µ–∫—Ç–µ...", "form-btn": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å",
        "label-services": "–¢–∏–ø —É—Å–ª—É–≥–∏", "svc-consult": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", "svc-branding": "–ë—Ä–µ–Ω–¥–∏–Ω–≥", "svc-smm": "SMM", "svc-logo": "–õ–æ–≥–æ—Ç–∏–ø", "svc-website": "–í–µ–±-—Å–∞–π—Ç",
        "gallery-sub": "–ù–∞—à–∏ –†–∞–±–æ—Ç—ã", "gallery-title": "–ì–∞–ª–µ—Ä–µ—è",
        "gallery-more": "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë", "gallery-less": "–°–∫—Ä—ã—Ç—å"
    },
    en: {
        "nav-core": "HOME", "nav-projects": "PROJECTS", "nav-tarifs": "PRICING", "nav-sync": "CONTACT US",
        "hero-slogan": "MORE THAN AGENCY", "hero-sub": "INTELLIGENCE ‚Ä¢ ELEGANCE ‚Ä¢ EVOLUTION", "hero-btn": "GET STARTED",
        "stat-projects": "Completed Projects", "stat-clients": "Happy Clients", "stat-years": "Years of Experience",
        "registry-title": "OUR BEST WORK", "catalog-title": "Our Projects",
        "vault-web": "Websites", "vault-smm": "SMM / Instagram", "vault-media": "Media / Cartoons",
        "web-tag-1": "E-Commerce / Website", "web-title-1": "Coffee Distribution", "web-desc-1": "Website for a premium coffee brand",
        "web-tag-2": "Next.js / AI Integration", "web-title-2": "Tech Community", "web-desc-2": "Website for IT Ministry",
        "web-tag-3": "Website / Branding", "web-title-3": "Truck Sales", "web-desc-3": "Website for an international truck dealer",
        "view-project": "View Project ‚Üí",
        "smm-story-1": "<li>‚Ä¢ Systematized successful clothing brand</li><li>‚Ä¢ Professional branding approach</li><li>‚Ä¢ 70+ uniforms ‚Äî partnerships with companies and schools</li>",
        "smm-story-2": "<li>‚Ä¢ Brand recognition and PR strategy</li><li>‚Ä¢ Professional media and design services</li><li>‚Ä¢ Distributor partners across Uzbekistan</li>",
        "smm-story-3": "<li>‚Ä¢ Brand identity and PR system</li><li>‚Ä¢ Structured SMM and marketing approach</li><li>‚Ä¢ Client base and CRM system</li>",
        "smm-story-4": "<li>‚Ä¢ Strong and stable lead generation system</li><li>‚Ä¢ 10+ active clients monthly</li><li>‚Ä¢ High-performance marketing system</li>",
        "smm-story-5": "<li>‚Ä¢ Professional photo/media approach</li><li>‚Ä¢ Strategically managed social media</li><li>‚Ä¢ PR system</li>",
        "badge-prestige": "UNIFORM BRAND", "badge-success": "70+ UNIFORMS",
        "tag-furniture": "Furniture Company", "tag-branding": "CRM System",
        "tag-education": "Education", "tag-students": "10+ Monthly Clients",
        "tag-school": "School", "tag-media": "Media + PR",
        "media-type-1": "Pharmacy Chain", "media-type-2": "Cartoon", "media-type-3": "Cosmetics", "media-type-4": "Public Transport", "media-type-5": "Cosmetics",
        "pricing-mod": "OUR PLANS", "pricing-title": "Pricing Plans",
        "t1-name": "Econom", "t1-list": "<li>2 creative assets</li><li>1 shooting day</li><li>4 Reels / 8 Posts</li><li>15 stories</li>",
        "t2-name": "Online", "t2-list": "<li>Online management</li><li>2 creative assets</li><li>6-8 Reels / 10 posts</li><li>20 stories</li>",
        "t3-name": "Standard", "t3-list": "<li>8 reels / 12 posts</li><li>20+ stories</li><li>2 shooting days</li><li>4 creative assets</li>",
        "t4-name": "Premium", "t4-list": "<li>12 reels / 15 posts</li><li>4 shooting days</li><li>6 creative assets</li><li>Full Analytics</li>",
        "t5-name": "VIP", "t5-list": "<li>Website</li><li>Logo branding</li><li>Unlimited Reels</li><li>Unlimited Posts</li>",
        "optimal": "Best Value", "btn-init": "Choose Plan",
        "form-title": "Get in Touch", "form-sub": "Fill in your details and we'll get back to you shortly.",
        "label-name": "Your Name", "label-email": "Email", "label-type": "Choose Plan", "label-msg": "Your Message",
        "ph-name": "Full Name", "ph-email": "Email Address", "opt-1": "Select a plan", "ph-msg": "Tell us about your project...", "form-btn": "SEND MESSAGE",
        "label-services": "Service Type", "svc-consult": "Consultation", "svc-branding": "Branding", "svc-smm": "SMM", "svc-logo": "Logo", "svc-website": "Website",
        "gallery-sub": "Our Work", "gallery-title": "Gallery",
        "gallery-more": "Show More", "gallery-less": "Show Less"
    }
};

// --- Multi-Language Logic ---
function changeLang(lang) {
    document.documentElement.lang = lang;
    localStorage.setItem('leno-lang', lang);

    // Update simple text
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if(langData[lang][key]) {
            el.innerHTML = langData[lang][key];
        }
    });

    // Update placeholders
    document.querySelectorAll('[data-i18n-ph]').forEach(el => {
        const key = el.getAttribute('data-i18n-ph');
        if(langData[lang][key]) {
            el.placeholder = langData[lang][key];
        }
    });

    // Highlight active button
    document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('lang-active'));
    const activeBtn = document.getElementById(`btn-${lang}`);
    if(activeBtn) activeBtn.classList.add('lang-active');

    if (typeof AOS !== 'undefined') AOS.refresh();
}

// --- Original Logic ---
if (typeof AOS !== 'undefined') AOS.init();

function toggleTheme() {
    const html = document.documentElement;
    html.classList.toggle('dark');
    const isDark = html.classList.contains('dark');
    document.body.style.backgroundColor = isDark ? "#05010a" : "#f9f5ff";
    document.body.style.color = isDark ? "white" : "#05010a";
}

// Particle Background
const canvas = document.getElementById('canvas-bg');
if (canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    class Particle {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 2;
            this.speedX = Math.random() * 0.5 - 0.25;
            this.speedY = Math.random() * 0.5 - 0.25;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
        }
        draw() {
            ctx.fillStyle = "rgba(139, 92, 246, 0.4)";
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    for (let i = 0; i < 100; i++) particles.push(new Particle());

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();
}

// Custom Cursor
const cursor = document.getElementById('cursor');
const cursorBlur = document.getElementById('cursor-blur');

document.addEventListener('mousemove', (e) => {
    if(cursor) cursor.style.left = e.clientX + 'px';
    if(cursor) cursor.style.top = e.clientY + 'px';

    if(cursorBlur) {
        cursorBlur.animate({
            left: `${e.clientX - 100}px`,
            top: `${e.clientY - 100}px`
        }, { duration: 500, fill: "forwards" });
    }
});

// Tilt Effect
document.querySelectorAll('.glass-card, .web-catalog-item, .smm-story-card').forEach(card => {
    card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const rotateX = (y - centerY) / 20;
        const rotateY = (centerX - x) / 20;
        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
    });
    card.addEventListener('mouseleave', () => {
        card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg)`;
    });
});

// Vault filter (projects)
function filterVault(category) {
    document.querySelectorAll('.vault-content').forEach(vault => {
        vault.classList.add('hidden');
    });
    document.querySelectorAll('.vault-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-purple-600');
    });
    const target = document.getElementById('vault-' + category);
    if (target) target.classList.remove('hidden');
    if (event && event.currentTarget) event.currentTarget.classList.add('active', 'bg-purple-600');

    if(category === 'media') {
        initVideoPreviews();
    }
    if (typeof AOS !== 'undefined') AOS.refresh();
}

function initVideoPreviews() {
    const videos = document.querySelectorAll('.preview-video');
    videos.forEach(video => {
        video.play();
        setInterval(() => {
            video.currentTime = 0;
            video.play();
        }, 10000);
    });
}

// Choose Tarif ‚Äî scroll to contact form and auto-select
function chooseTarif(value) {
    const contactSection = document.getElementById('contact');
    if (contactSection) {
        // Same page ‚Äî scroll to contact and auto-select
        contactSection.scrollIntoView({ behavior: 'smooth' });
        const smmCb = document.querySelector('input[name="services"][value="SMM"]');
        if (smmCb && !smmCb.checked) {
            smmCb.checked = true;
            smmCb.dispatchEvent(new Event('change', { bubbles: true }));
        }
        const select = document.getElementById('tarif-select');
        if (select) select.value = value;
    } else {
        // Different page (pricing.html) ‚Äî redirect to index.html with tarif param
        window.location.href = 'index.html?tarif=' + value + '#contact';
    }
}

// Telegram Bot Form Submission
const TG_BOT_TOKEN = '8764104495:AAEF08bryOf9nyr9fFOg_FlsRdv07uXHleE';
const TG_CHAT_ID = '-1003788093715';

function sendToTelegram(e) {
    e.preventDefault();

    const name = document.getElementById('form-name').value.trim();
    const email = document.getElementById('form-email').value.trim();
    const tarif = document.getElementById('tarif-select');
    const tarifText = tarif.options[tarif.selectedIndex].text;
    const msg = document.getElementById('form-msg').value.trim();
    const btn = document.getElementById('form-submit-btn');

    // Collect selected services
    const services = [...document.querySelectorAll('input[name="services"]:checked')].map(cb => cb.nextElementSibling.textContent).join(', ');

    if (!name || !email) return;

    const text = `üì© *New Lead from LENO Website*\n\nüë§ *Name:* ${name}\nüìß *Email:* ${email}\nüíº *Plan:* ${tarifText}\nüõ† *Services:* ${services || '‚Äî'}\nüí¨ *Message:* ${msg || '‚Äî'}`;

    btn.disabled = true;
    btn.textContent = '...';

    fetch(`https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: TG_CHAT_ID,
            text: text,
            parse_mode: 'Markdown'
        })
    })
    .then(res => res.json())
    .then(data => {
        if (data.ok) {
            btn.textContent = '‚úì';
            btn.style.background = '#22c55e';
            document.getElementById('contact-form').reset();
            // Hide tariff wrapper after reset
            const tw = document.getElementById('tarif-wrapper');
            if (tw) tw.style.display = 'none';
            setTimeout(() => {
                btn.textContent = '';
                btn.style.background = '';
                btn.disabled = false;
                changeLang(document.documentElement.lang || 'uz');
            }, 3000);
        } else {
            btn.textContent = 'Error';
            btn.style.background = '#ef4444';
            btn.disabled = false;
            setTimeout(() => {
                btn.textContent = '';
                btn.style.background = '';
                changeLang(document.documentElement.lang || 'uz');
            }, 3000);
        }
    })
    .catch(() => {
        btn.textContent = 'Error';
        btn.style.background = '#ef4444';
        btn.disabled = false;
        setTimeout(() => {
            btn.textContent = '';
            btn.style.background = '';
            changeLang(document.documentElement.lang || 'uz');
        }, 3000);
    });
}

// Initialize on Load
document.addEventListener('DOMContentLoaded', () => {
    // Restore language from localStorage
    const savedLang = localStorage.getItem('leno-lang') || 'uz';
    changeLang(savedLang);

    // Init videos
    initVideoPreviews();

    // Handle tarif param from pricing page redirect
    const urlParams = new URLSearchParams(window.location.search);
    const tarifParam = urlParams.get('tarif');
    if (tarifParam && document.getElementById('contact')) {
        const smmCb = document.querySelector('input[name="services"][value="SMM"]');
        if (smmCb && !smmCb.checked) {
            smmCb.checked = true;
            smmCb.dispatchEvent(new Event('change', { bubbles: true }));
        }
        setTimeout(() => {
            const select = document.getElementById('tarif-select');
            if (select) select.value = tarifParam;
        }, 100);
    }

    // Contact form logic
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
        contactForm.addEventListener('submit', sendToTelegram);

        // Limit service selection to max 2 + show tariff only when SMM is selected
        const MAX_SERVICES = 2;
        const tarifWrapper = document.getElementById('tarif-wrapper');
        const tarifSelect = document.getElementById('tarif-select');

        document.querySelectorAll('input[name="services"]').forEach(cb => {
            cb.addEventListener('change', () => {
                const checked = document.querySelectorAll('input[name="services"]:checked');

                // Max 2 limit
                document.querySelectorAll('input[name="services"]').forEach(el => {
                    const chip = el.closest('.service-chip');
                    if (!el.checked && checked.length >= MAX_SERVICES) {
                        chip.classList.add('disabled');
                    } else {
                        chip.classList.remove('disabled');
                    }
                });

                // Show tariff section only when SMM is checked
                const smmChecked = document.querySelector('input[name="services"][value="SMM"]').checked;
                if (smmChecked) {
                    tarifWrapper.style.display = '';
                    tarifSelect.required = true;
                } else {
                    tarifWrapper.style.display = 'none';
                    tarifSelect.value = '';
                    tarifSelect.required = false;
                }
            });
        });
    }
});